<!DOCTYPE html>
<!-- HTML template supports both list and node-based linked list data structures from app.py -->
<html>
<head>
    <title>{{ title }} - Contact Manager</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .card { border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; }
        .search-section { background-color: #e8f4f8; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .add-section { background-color: #f0f0f0; padding: 15px; border-radius: 5px; }
        input[type="text"], input[type="email"], input[type="search"] { padding: 8px; margin-right: 5px; width: 250px; }
        button { padding: 8px 15px; cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 4px; }
        button:hover { background-color: #45a049; }
        .clear-search { background-color: #ff9800; }
        .clear-search:hover { background-color: #e68900; }
        .delete-btn { background-color: #f44336; padding: 5px 10px; font-size: 0.9em; }
        .delete-btn:hover { background-color: #da190b; }
        .contact-actions { display: inline-block; margin-left: 10px; }
        .search-info { margin-top: 10px; color: #555; font-style: italic; }
        .data-structure-info { background-color: #f9f9f9; padding: 10px; margin-top: 10px; border-left: 4px solid #4CAF50; font-size: 0.9em; color: #666; }
    </style>
</head>
<body>
    <h1>{{ title }}Contact Manager</h1>
    
    <!-- Data Structure Info -->
    <div class="data-structure-info">
        <strong>Data Structure:</strong> Supports both Python List and Linked List (Node) implementations
    </div>
    
    <!-- Search Section -->
    <div class="search-section">
        <h3>Search Contacts</h3>
        <form action="/" method="GET">
            <input type="search" name="search" placeholder="Search by name or email..." value="{{ search_query }}">
            <button type="submit">Search</button>
            {% if search_query %}
                <a href="/"><button type="button" class="clear-search">Clear Search</button></a>
            {% endif %}
        </form>
        {% if search_performed and search_query %}
            <div class="search-info">
                Found {{ contacts|length }} contact(s) matching "{{ search_query }}"
            </div>
        {% endif %}
    </div>
    
    <!-- Add Contact Section -->
    <div class="add-section">
        <h3>Add New Contact</h3>
        <form action="/add" method="POST">
            <input type="text" name="name" placeholder="Name" required>
            <input type="email" name="email" placeholder="Email" required>
            <button type="submit">Add to Data Structure</button>
        </form>
    </div>
    <hr>
    
    <!-- Contacts Display -->
    <h3>
        {% if search_query %}
            Search Results
        {% else %}
            Current Contacts (In-Memory)
        {% endif %}
    </h3>
    
    {% if contacts %}
        {% for contact in contacts %}
            <div class="card">
                <strong>{{ contact.name }}</strong> - {{ contact.email }}
                <div class="contact-actions">
                    <form action="/delete" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this contact?');">
                        <input type="hidden" name="name" value="{{ contact.name }}">
                        <input type="hidden" name="email" value="{{ contact.email }}">
                        <button type="submit" class="delete-btn">Delete</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>
            {% if search_query %}
                No contacts found matching "{{ search_query }}"
            {% else %}
                No contacts yet. Add one to get started!
            {% endif %}
        </p>
    {% endif %}
    
    {% if search_query and all_contacts %}
        <hr>
        <p style="color: #666; font-size: 0.9em;">Total contacts in system: {{ all_contacts|length }}</p>
    {% endif %}
</body>
</html>